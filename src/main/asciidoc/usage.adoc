[[usage]]
= Usage

== Basic usage

There are two ways to use the I18n Enum plugin:

You can either implement the trait `I18nEnumTrait` on your enumeration like this (Only Grails 3.x):

[source,groovy]
----
package test
import grails.plugins.i18nEnums.traits.I18nEnumTrait

enum MyEnum implements I18nEnumTrait {
    ONE, Two, three
}
----

or you can annotate your enumeration with `@I18nEnum` (also works for Grails 2.x)

[source,groovy]
----
package test
import grails.plugins.i18nEnums.annotations.I18nEnum

@I18nEnum
enum MyEnum {
    ONE, Two, three
}
----

will generate the following codes for each enum:
[source,groovy]
----
test.MyEnum.ONE.codes   == ['test.MyEnum.ONE',   'test.MyEnum.ONE',   'test.MyEnum.one']
test.MyEnum.Two.codes   == ['test.MyEnum.TWO',   'test.MyEnum.Two',   'test.MyEnum.two']
test.MyEnum.three.codes == ['test.MyEnum.THREE', 'test.MyEnum.three', 'test.MyEnum.three']
----

And the following default values:
[source ]
----
test.MyEnum.ONE.defaultMessage == 'ONE'
test.MyEnum.Two.defaultMessage == 'Two'
test.MyEnum.three.defaultMessage == 'three'
----

as it can be seen, the codes comes in three variations: `UPPER_CASE`, `UNCHANGED` and `LOWER_CASE`, and the default message is
simply the Enum value.

If you use the Trait behaviour of the `MessageSourceResolvable` implementation can only be done from the config file (see the Configuration section below). If you use the annotation, it is possible to use fine grained configuration for each annotation (See the Advanced usage section below)

== Advanced usage

To get even more control over, how the codes and the default value are generated, you can add parameters to the annotation:

[source,groovy]
----
@I18nEnum(prefix = '', postfix = '', shortName = false, defaultNameCase = DefaultNameCase.UNCHANGED)
----

The above are the default values.


=== Prefix and Postfix

Prefix controls what is added before the package name. If you do not add a dot after the prefix, one will be added for you.

Postfix controls what is added after the `ENUM_VALUE`. If you do not add a dot before the postfix, one will be added for you.

==== Example:
[source,groovy]
----
package test
import grails.plugins.i18nEnums.annotations.I18nEnum

@I18nEnum(prefix = 'enum', postfix = 'label')
enum MyEnum {
    ONE, Two, three
}
----

will generate the following codes for each enum:
[source ]
----
test.MyEnum.ONE.codes ==   ['enum.test.MyEnum.ONE.label',   'enum.test.MyEnum.ONE.label',   'enum.test.MyEnum.one.label']
test.MyEnum.Two.codes ==   ['enum.test.MyEnum.TWO.label',   'enum.test.MyEnum.Two.label',   'enum.test.MyEnum.two.label']
test.MyEnum.three.codes == ['enum.test.MyEnum.THREE.label', 'enum.test.MyEnum.three.label', 'enum.test.MyEnum.three.label']
----

=== shortName
If you do not want the package name in the generated codes, just add shortName = true to your annotation parameters

==== Example:
[source,groovy]
----
package test
import grails.plugins.i18nEnums.annotations.I18nEnum

@I18nEnum(shortName = true)
enum MyEnum {
    ONE, Two, three
}
----

will generate the following codes for each enum:
[source,groovy]
----
test.MyEnum.ONE.codes ==   ['MyEnum.ONE',   'MyEnum.ONE',   'MyEnum.one']
test.MyEnum.Two.codes ==   ['MyEnum.TWO',   'MyEnum.Two',   'MyEnum.two']
test.MyEnum.three.codes == ['MyEnum.THREE', 'MyEnum.three', 'MyEnum.three']
----

=== defaultNameCase
To control the `defaultMessage` you can use `defaultNameCase`. It can be set to one of the following values:

[source,groovy]
----
UPPER_CASE, LOWER_CASE, CAPITALIZE, ALL_CAPS, UNCHANGED
----

where `UNCHANGED` is the default.

==== Example:
`DefaultNameCase.CAPITALIZE`:
[source,groovy]
----
package test
import grails.plugins.i18nEnums.annotations.I18nEnum
import grails.plugins.i18nEnums.DefaultNameCase

@I18nEnum(defaultNameCase = DefaultNameCase.CAPITALIZE)
enum MyEnum {
    ONE, Two, three
}
----

And the following default values:
[source ]
----
test.MyEnum.ONE.defaultMessage == 'One'
test.MyEnum.Two.defaultMessage == 'Two'
test.MyEnum.three.defaultMessage == 'Three'
----

`DefaultNameCase.ALL_CAPS`:
[source,groovy]
----
package test
import grails.plugins.i18nEnums.annotations.I18nEnum
import grails.plugins.i18nEnums.DefaultNameCase

@I18nEnum(defaultNameCase = DefaultNameCase.ALL_CAPS)
enum MyEnum {
    ONE, Two, three, Four_five
}
----

And the following default values:
[sourceimport grails.plugins.i18nEnums.annotations.I18nEnum]
----
test.MyEnum.ONE.defaultMessage == 'One'
test.MyEnum.Two.defaultMessage == 'Two'
test.MyEnum.three.defaultMessage == 'Three'
test.MyEnum.Four_five.defaultMessage == 'Four Five'
----

`DefaultNameCase.LOWER_CASE`:
[source,groovy]
----
package test
import grails.plugins.i18nEnums.annotations.I18nEnum
import grails.plugins.i18nEnums.DefaultNameCase

@I18nEnum(defaultNameCase = DefaultNameCase.LOWER_CASE)
enum MyEnum {
    ONE, Two, three
}
----

And the following default values:

[source ]
----
test.MyEnum.ONE.defaultMessage == 'one'
test.MyEnum.Two.defaultMessage == 'two'
test.MyEnum.three.defaultMessage == 'three'
----

== Configuration
It is possible to configure default settings from configuration. This is the only way to control the code generation if you choose to use the I18nEnumTrait.

In `application.groovy` create a configuration tree like this:

[source,groovy]
----
import grails.plugin.i18nEnum.transformation.DefaultNameCase

// Your other configuration

grails {
    plugin {
        i18nEnum {
            postfix = "label"
            shortName = true
            defaultNameCase = DefaultNameCase.ALL_CAPS
        }
    }
}
----

If you prefer `application.yml` the configuration will be like this:
[source,yml]
----
grails:
    plugin:
        i18nEnum:
            postfix: label
            shortName: true
            defaultNameCase: ALL_CAPS
----


The settings values are the same as the configuration directives for the annotation.
